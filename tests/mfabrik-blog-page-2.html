<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
<meta charset="UTF-8" />
<title>mFabrik - mobile sites, apps, HTML5 and CMS software development - Part 2</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://blog.mfabrik.com/wp-content/themes/twentyten/style.css" />
<link rel="pingback" href="http://blog.mfabrik.com/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="mFabrik - mobile sites, apps, HTML5 and CMS software development &raquo; Feed" href="http://blog.mfabrik.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="mFabrik - mobile sites, apps, HTML5 and CMS software development &raquo; Comments Feed" href="http://blog.mfabrik.com/comments/feed/" />
        <script type="text/javascript" class="mobilize-init">
            // Called by mobilize.init()
            function mobilizeCustomInit() {
               // Include msite specific Javascript initialization layer
               mobilize.cdnOptions.javascriptBundles.push("http://blog.mfabrik.com/wp-content/plugins/mobilizejs-for-wordpress/mobile-custom.js");
               mobilize.cdnOptions.cssBundles.push("http://blog.mfabrik.com/wp-content/plugins/mobilizejs-for-wordpress/mobile-custom.css");
            }
        </script>
    <link rel='stylesheet' id='admin-bar-css'  href='http://blog.mfabrik.com/wp-includes/css/admin-bar.css?ver=20110122' type='text/css' media='all' />
<link rel='stylesheet' id='shashin_css-css'  href='http://blog.mfabrik.com/wp-content/plugins/shashin/display/shashin.css?ver=2.6.3' type='text/css' media='all' />
<link rel='stylesheet' id='highslide_css-css'  href='http://blog.mfabrik.com/wp-content/plugins/shashin/display/highslide.css?ver=4.1.4' type='text/css' media='all' />
<script type='text/javascript' src='http://blog.mfabrik.com/wp-includes/js/l10n.js?ver=20101110'></script>
<script type='text/javascript' src='http://blog.mfabrik.com/wp-content/plugins/shashin/display/highslide/highslide.js?ver=4.1.4'></script>
<script type='text/javascript' src='http://blog.mfabrik.com/wp-includes/js/swfobject.js?ver=2.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var highslide_settings = {
	graphics_dir: "http://blog.mfabrik.com/wp-content/plugins/shashin/display/highslide/graphics/",
	outline_type: "rounded-white",
	dimming_opacity: "0.75",
	interval: "5000",
	repeat: "1",
	position: "top center",
	hide_controller: "0"
};
/* ]]> */
</script>
<script type='text/javascript' src='http://blog.mfabrik.com/wp-content/plugins/shashin/display/highslide_settings.js?ver=2.6.3'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://blog.mfabrik.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://blog.mfabrik.com/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='mFabrik &#8211; mobile sites, apps, HTML5 and CMS software development' href='http://blog.mfabrik.com/' />
<meta name="generator" content="WordPress 3.1" />

<!-- All in One SEO Pack 1.6.13.1 by Michael Torbert of Semper Fi Web Design[78,185] -->
<link rel="canonical" href="http://blog.mfabrik.com/page/2/" />
<!-- /all in one seo pack -->

	<link type="text/css" rel="stylesheet" href="http://blog.mfabrik.com/wp-content/plugins/syntax/Styles/SyntaxHighlighter.css" />
<style type="text/css" media="print">#wpadminbar { display:none; }</style>
<style type="text/css">
	html { margin-top: 28px !important; }
	* html body { margin-top: 28px !important; }
</style>
</head>

<body class="home blog paged admin-bar paged-2">
	
        <script type="text/javascript">

         // Make sure sidescroll function is there
         function mobilizeCustomInit() {
                // Add your own Javascript layer to load list
                // in mobile mode. 
                // push() is array append function in JS.
                // NOTE: Relative paths may have not luck here.
                mobilize.cdnOptions.javascriptBundles.push("js/jquery.easing.js");
                mobilize.cdnOptions.javascriptBundles.push("js/jquery.mobile.scrollview.js");
                mobilize.cdnOptions.javascriptBundles.push("js/mobitube.js");
                mobilize.cdnOptions.javascriptBundles.push("js/mobilize.wordpress.js");
                mobilize.cdnOptions.cssBundles.push("css/jquery.mobile.scrollview.css");
          }        
        </script>
  
        <script 
                type="text/javascript" 
                src="/js/mobilize.js"
                >
        </script>

        <script type="text/javascript" 
                src="/js/mobilize.wordpress.js"
                >
        </script>

        <script type="text/javascript">        

             // Setup mobilize.js to load our additional mobilize.mfabrik-blog.js layer
             function setupCustomBlog(){

                 mobilize.init({
                 }, {
                     // Don't do cloud error reporting
                     // (it would useful for production deployment only)
                     errorReportingURL: false,
                     
                     baseURL: "http://localhost:8080", // Test server

                     // Load JS files locally, unbundled
                     javascriptBundles : ["js/jquery.js", 
                                         "js/mobilize.onjq.js", 
                                         "js/jquery.mobile.js"],

                     // Load CSS files locally, unbundled
                     cssBundles: ["css/jquery.mobile.css", 
                                 "css/wordpress.css"],

                                          
                 });
                                  
                 // Since we are not in auto-run mode,
                 // we start doing the stuff after we have set-up
                 // our options for development correctly
                 mobilize.bootstrap();
                 
             }        
             setupCustomBlog();              
        </script>   
	
	
<div id="wrapper" class="hfeed">
	<div id="header">
		<div id="masthead">
			<div id="branding" role="banner">
								<h1 id="site-title">
					<span>
						<a href="http://blog.mfabrik.com/" title="mFabrik &#8211; mobile sites, apps, HTML5 and CMS software development" rel="home">mFabrik &#8211; mobile sites, apps, HTML5 and CMS software development</a>
					</span>
				</h1>
				<div id="site-description">Freedom delivered.</div>

										<img src="http://blog.mfabrik.com/wp-content/themes/twentyten/images/headers/path.jpg" width="940" height="198" alt="" />
								</div><!-- #branding -->

			<div id="access" role="navigation">
			  				<div class="skip-link screen-reader-text"><a href="#content" title="Skip to content">Skip to content</a></div>
								<div class="menu"><ul><li ><a href="http://blog.mfabrik.com/" title="Home">Home</a></li><li class="page_item page-item-2"><a href="http://blog.mfabrik.com/about/" title="About this blog">About this blog</a></li><li class="page_item page-item-336"><a href="http://blog.mfabrik.com/phonegap-on-maemo/" title="PhoneGap on Maemo">PhoneGap on Maemo</a></li></ul></div>
			</div><!-- #access -->
		</div><!-- #masthead -->
	</div><!-- #header -->

	<div id="main">

		<div id="container">
			<div id="content" role="main">

			
	<div id="nav-above" class="navigation">
		<div class="nav-previous"><a href="http://blog.mfabrik.com/page/3/?mobilize-test-wordpress=true" ><span class="meta-nav">&larr;</span> Older posts</a></div>
		<div class="nav-next"><a href="http://blog.mfabrik.com/?mobilize-test-wordpress=true" >Newer posts <span class="meta-nav">&rarr;</span></a></div>
	</div><!-- #nav-above -->




			<div id="post-1231" class="post-1231 post type-post status-publish format-standard hentry category-plone category-technology tag-bagger288 tag-plone tag-technology">
			<h2 class="entry-title"><a href="http://blog.mfabrik.com/2011/04/14/if-plone-were-a-vehicle/" title="Permalink to If Plone were a vehicle&#8230;" rel="bookmark">If Plone were a vehicle&#8230;</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on</span> <a href="http://blog.mfabrik.com/2011/04/14/if-plone-were-a-vehicle/" title="2:02 pm" rel="bookmark"><span class="entry-date">April 14, 2011</span></a> <span class="meta-sep">by</span> <span class="author vcard"><a class="url fn n" href="http://blog.mfabrik.com/author/moo/" title="View all posts by Mikko Ohtamaa">Mikko Ohtamaa</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>&#8230; it would be Bagger 288.</p>
<p><iframe width="640" height="385" src="http://www.youtube.com/embed/azEvfD4C6ow" frameborder="0" type="text/html"></iframe><div style="text-align:right;"><a onclick="javascript:urchinTracker ('/outgoing/www.clickonf5.org/');" style="color:#aaa;font-size:9px"  href="http://www.clickonf5.org/" title="IFRAME Embed for Youtube Free WordPress Plugin" target="_blank">IFRAME Embed for Youtube</a></div></p>
<p>The use cases are almost the same.
<p class="signature">
<a onclick="javascript:urchinTracker ('/outgoing/mfabrik.com/@@zoho-contact-form');"  href="http://mfabrik.com/@@zoho-contact-form"><img valign="middle"  src="http://blog.mfabrik.com/wp-content/uploads/mfabrik-24.png"></img></a> <a onclick="javascript:urchinTracker ('/outgoing/mfabrik.com/@@zoho-contact-form');"  href="http://mfabrik.com/@@zoho-contact-form"">Get developers</a> <a onclick="javascript:urchinTracker ('/outgoing/twitter.com/mfabrik');"  href="http://twitter.com/mfabrik"> <a onclick="javascript:urchinTracker ('/outgoing/twitter.com/mfabrik');"  href="http://feeds.feedburner.com/mFabrikWebAndMobileDevelopment" rel="alternate" type="application/rss+xml"><img valign="middle" src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a> <a onclick="javascript:urchinTracker ('/outgoing/feeds.feedburner.com/mFabrikWebAndMobileDevelopment');"  href="http://feeds.feedburner.com/mFabrikWebAndMobileDevelopment" rel="alternate" type="application/rss+xml">Subscribe mFabrik blog in a reader</a> <img valign="middle"  src="http://blog.mfabrik.com/wp-content/uploads/twitter-24.png"></img></a> <a onclick="javascript:urchinTracker ('/outgoing/twitter.com/moo9000');"  href="http://twitter.com/moo9000">Follow me on Twitter</a></p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
									<span class="cat-links">
						<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span> <a href="http://blog.mfabrik.com/category/plone/" title="View all posts in plone" rel="category tag">plone</a>, <a href="http://blog.mfabrik.com/category/technology/" title="View all posts in technology" rel="category tag">technology</a>					</span>
					<span class="meta-sep">|</span>
													<span class="tag-links">
						<span class="entry-utility-prep entry-utility-prep-tag-links">Tagged</span> <a href="http://blog.mfabrik.com/tag/bagger288/" rel="tag">bagger288</a>, <a href="http://blog.mfabrik.com/tag/plone/" rel="tag">plone</a>, <a href="http://blog.mfabrik.com/tag/technology/" rel="tag">technology</a>					</span>
					<span class="meta-sep">|</span>
								<span class="comments-link"><a href="http://blog.mfabrik.com/2011/04/14/if-plone-were-a-vehicle/#respond" title="Comment on If Plone were a vehicle&#8230;">Leave a comment</a></span>
							</div><!-- .entry-utility -->
		</div><!-- #post-## -->

		
	


			<div id="post-1215" class="post-1215 post type-post status-publish format-standard hentry category-plone category-python category-technology tag-behavior tag-compress tag-content-type tag-dexterity tag-javascript tag-minimize tag-plone tag-python tag-static-media tag-widget tag-zope">
			<h2 class="entry-title"><a href="http://blog.mfabrik.com/2011/04/13/including-widget-specific-javascripts-in-plone-using-python-conditions/" title="Permalink to Including widget specific Javascripts in Plone using Python conditions" rel="bookmark">Including widget specific Javascripts in Plone using Python conditions</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on</span> <a href="http://blog.mfabrik.com/2011/04/13/including-widget-specific-javascripts-in-plone-using-python-conditions/" title="12:27 pm" rel="bookmark"><span class="entry-date">April 13, 2011</span></a> <span class="meta-sep">by</span> <span class="author vcard"><a class="url fn n" href="http://blog.mfabrik.com/author/moo/" title="View all posts by Mikko Ohtamaa">Mikko Ohtamaa</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>Here is described a way to include Javascript for certain widgets or certain pages only in <a onclick="javascript:urchinTracker ('/outgoing/plone.org');"  href="http://plone.org">Plone</a> CMS</p>
<ul>
<li>Javascripts are processed through <em>portal_javascripts</em> utility automatically, making them suitable for production deployment (minimized, cached). Plone does all this for you. Also the same rules apply for CSS and <em>portal_css</em> tool.</li>
<li>A special condition is created in Python code to determine whether to include the script or not on a page: it checks whether we are on a page needing the script and then signals portal_javascript which in turn puts the script to HTML &lt;head&gt; section</li>
<li>Javascripts are served from a <em>static</em> media folder in a Plone add-on utilizing <a onclick="javascript:urchinTracker ('/outgoing/grok.zope.org');"  href="http://grok.zope.org">Grok</a> framework. Static media folder is mapped to unique <em>resource</em> names spaces (++resource++yourpythonmodule.name), so that there are no file conflicts between different add-ons.</li>
<li>These instructions mainly are designed for <a onclick="javascript:urchinTracker ('/outgoing/plone.org/products/dexterity');"  href="http://plone.org/products/dexterity">Dexterity content type subsystem</a>, but can be used with any content types by replacing the behavior check with a marker interface check</li>
</ul>
<p>Dexterity content types can use Dexterity <em>behaviors </em>control panel to add new behaviors on your content types. One such a behavior is to include certain Javascript files when these content types are viewed or edited.</p>
<p>The example here shows how to include a Javascript if the following conditions are met</p>
<ul>
<li>You are developing a Plone add-on as a Python package (as oppose, to say, edit files directly through-the-web)</li>
<li>Content type has a certain Dexterity behavior applied on it</li>
<li>Different files are served for view (visitors) and edit modes (content editing interface)</li>
</ul>
<div>
<p><em>Note: There is no easy way currently directly check whether a certain widget and widget mode is active on a particular view. Thus, we do some assumptions and checks manually if we are on &#8220;edit&#8221; view.</em></p>
<p>Plone <em>portal_javascripts </em>is a site specific registry. Available javascripts are kept in the site database, so that you can fine-tune their settings on-line, through-the-web through Zope application server management interface. When Plone add-on is installed, a subsystem called GenericSetup can import database setting changes on XML based profiles. There is a tool called portal_setup which allows you easily to export, import or put parts of this setting updates to your add-on installer.<em><br />
</em></p>
</div>
<p>We import Javascript files to portal_javascripts using GenericSetup file jsregistry.xml:</p>
<pre>&lt;?xml version="1.0"?&gt;
&lt;object name="portal_javascripts"&gt;

        &lt;!-- View mode javascript --&gt;
        &lt;javascript
                id="++resource++yourcompany.app/integration.js"
                authenticated="False"
                cacheable="True" compression="safe" cookable="True"
                enabled="True" expression="context/@@integration_javascript"
                inline="False"
                /&gt;

        &lt;!-- Edit mode javascript --&gt;
        &lt;javascript
                id="++resource++yourcompany.app/integration.edit.js"
                authenticated="False"
                cacheable="True" compression="safe" cookable="True"
                enabled="True" expression="context/@@edit_integration_javascript"
                inline="False"
                /&gt;

&lt;/object&gt;</pre>
<p>Then we create the special conditions using Grok views and Python code. This code would go to <em>yourcompany/app/browser/views.py</em> Python module:</p>
<pre># Zope imports
from Acquisition import aq_inner
from zope.interface import Interface
from five import grok
from zope.component import getMultiAdapter

from yourcompany.app.behavior.lsmintegration import IYourWidgetIntegration

class IntegrationJavascriptHelper(grok.CodeView):
    """ Used by portal_javascripts to determine when to include our
        custom Javascript integration code.

    This view is referred from the expression in jsregistry.xml.
    """

    # The view is available on every content item type
    grok.context(Interface)
    grok.name("integration_javascript")

    def render(self):
        """ Check if we are in a specific content type.

        Check that the Dexerity content type has a certain
        behavior set on it through Dexterity settings panel.

        Alternative, just check for a marker interface here.
        """

        # render() methot is a the only traversable
        # Grok CodeView method. It can be used for rendering
        # HTML code, but also for utility views
        # to return raw Python data

        try:
            # Check if a Dexterity behavior is available on the current context object
            # - if it is not, behavior adapter will raise TypeError
            avail = IYourWidgetIntegration(self.context)
        except TypeError:
            return False

        # If called directly from the browser like
        # http://localhost:8080/Plone/integration_javascript
        # will return HTTP 204 No Content

        return True

class EditModeIntegrationJavascriptHelper(IntegrationJavascriptHelper):
    """ Used by portal_javascripts to determine when to include our custom Javascript
        integration code *on edit pages* only.

    Subclass the existing checked and add more limiting conditions.
    """
    grok.name("edit_integration_javascript")

    def render(self):
        """
        @return True: If this template is rendered "Edit view" of the item
        """

        if not IntegrationJavascriptHelper.render(self):
            # We are not even on the correct content type
            return False

        # This is a hacked together as Plone does not provide a real
        # mechanism to separate edit views to other views.
        # We simply check if the current view URI ends with "edit"

        path = self.request.get("PATH_INFO", "")

        if path.endswith("/edit") or path.endswith("/@@edit"):
            return True

        return False</pre>
<p>Question: how much Grok is included with Plone 4.1: at least parts of its are, but would this example work with vanilla Plone 4.01 without including five.grok manually as a dependency?
<p class="signature">
<a onclick="javascript:urchinTracker ('/outgoing/mfabrik.com/@@zoho-contact-form');"  href="http://mfabrik.com/@@zoho-contact-form"><img valign="middle"  src="http://blog.mfabrik.com/wp-content/uploads/mfabrik-24.png"></img></a> <a onclick="javascript:urchinTracker ('/outgoing/mfabrik.com/@@zoho-contact-form');"  href="http://mfabrik.com/@@zoho-contact-form"">Get developers</a> <a onclick="javascript:urchinTracker ('/outgoing/twitter.com/mfabrik');"  href="http://twitter.com/mfabrik"> <a onclick="javascript:urchinTracker ('/outgoing/twitter.com/mfabrik');"  href="http://feeds.feedburner.com/mFabrikWebAndMobileDevelopment" rel="alternate" type="application/rss+xml"><img valign="middle" src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a> <a onclick="javascript:urchinTracker ('/outgoing/feeds.feedburner.com/mFabrikWebAndMobileDevelopment');"  href="http://feeds.feedburner.com/mFabrikWebAndMobileDevelopment" rel="alternate" type="application/rss+xml">Subscribe mFabrik blog in a reader</a> <img valign="middle"  src="http://blog.mfabrik.com/wp-content/uploads/twitter-24.png"></img></a> <a onclick="javascript:urchinTracker ('/outgoing/twitter.com/moo9000');"  href="http://twitter.com/moo9000">Follow me on Twitter</a></p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
									<span class="cat-links">
						<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span> <a href="http://blog.mfabrik.com/category/plone/" title="View all posts in plone" rel="category tag">plone</a>, <a href="http://blog.mfabrik.com/category/python/" title="View all posts in python" rel="category tag">python</a>, <a href="http://blog.mfabrik.com/category/technology/" title="View all posts in technology" rel="category tag">technology</a>					</span>
					<span class="meta-sep">|</span>
													<span class="tag-links">
						<span class="entry-utility-prep entry-utility-prep-tag-links">Tagged</span> <a href="http://blog.mfabrik.com/tag/behavior/" rel="tag">behavior</a>, <a href="http://blog.mfabrik.com/tag/compress/" rel="tag">compress</a>, <a href="http://blog.mfabrik.com/tag/content-type/" rel="tag">content type</a>, <a href="http://blog.mfabrik.com/tag/dexterity/" rel="tag">dexterity</a>, <a href="http://blog.mfabrik.com/tag/javascript/" rel="tag">javascript</a>, <a href="http://blog.mfabrik.com/tag/minimize/" rel="tag">minimize</a>, <a href="http://blog.mfabrik.com/tag/plone/" rel="tag">plone</a>, <a href="http://blog.mfabrik.com/tag/python/" rel="tag">python</a>, <a href="http://blog.mfabrik.com/tag/static-media/" rel="tag">static media</a>, <a href="http://blog.mfabrik.com/tag/widget/" rel="tag">widget</a>, <a href="http://blog.mfabrik.com/tag/zope/" rel="tag">zope</a>					</span>
					<span class="meta-sep">|</span>
								<span class="comments-link"><a href="http://blog.mfabrik.com/2011/04/13/including-widget-specific-javascripts-in-plone-using-python-conditions/#comments" title="Comment on Including widget specific Javascripts in Plone using Python conditions">2 Comments</a></span>
							</div><!-- .entry-utility -->
		</div><!-- #post-## -->

		
	


			<div id="post-1213" class="post-1213 post type-post status-publish format-standard hentry category-business">
			<h2 class="entry-title"><a href="http://blog.mfabrik.com/2011/04/12/%e2%80%9cwhat-you-think-you-know-about-your-users-is-wrong-and-you-won%e2%80%99t-know-until-they-tell-you/" title="Permalink to “What you think you know about your users is wrong, and you won’t know until they tell you.&#8221;" rel="bookmark">“What you think you know about your users is wrong, and you won’t know until they tell you.&#8221;</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on</span> <a href="http://blog.mfabrik.com/2011/04/12/%e2%80%9cwhat-you-think-you-know-about-your-users-is-wrong-and-you-won%e2%80%99t-know-until-they-tell-you/" title="9:17 am" rel="bookmark"><span class="entry-date">April 12, 2011</span></a> <span class="meta-sep">by</span> <span class="author vcard"><a class="url fn n" href="http://blog.mfabrik.com/author/kipi/" title="View all posts by kipi">kipi</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>I was reading one article (<a onclick="javascript:urchinTracker ('/outgoing/memeburn.com/2011/04/your-brand-and-mobile-how-to-make-it-all-happen/');" title="Your brand and mobile: How to make it all happen"  href="http://memeburn.com/2011/04/your-brand-and-mobile-how-to-make-it-all-happen/" target="_blank">Your brand and mobile: How to make it all happen</a>) forwarded to my by my colleague when one of the points in that article catched my mind: <strong>Don&#8217;t hold back on that beta product</strong>.</p>
<p>It says simply that no product is ever perfect the first time around, and I think that applies not only to products but services, activities and actions, too. And if looking back, to one of the latest major changes in our lifes, communication and selling&amp;marketing, web and web technologies/products/services are very good proof of that. We are still updating, upgrading and modifying those services and activities to better serve our customers and clients, to enable more sales and increase knowledge of brands.</p>
<p>As I yesterday blogged that mobile (internet) technology and services should be constant part of companies strategy, same rules applies to it than with &#8220;traditional&#8221; web based services: it won&#8217;t be perfect first time around. And that means its not just one-shot project but should be continuous process, the same way as happens with web. And oh yeah, do not even think that if you have learnt about web users that ALL same rules and learnings applies to mobile phone users.. you just will be wrong, so wrong..</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
									<span class="cat-links">
						<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span> <a href="http://blog.mfabrik.com/category/business/" title="View all posts in Business" rel="category tag">Business</a>					</span>
					<span class="meta-sep">|</span>
												<span class="comments-link"><a href="http://blog.mfabrik.com/2011/04/12/%e2%80%9cwhat-you-think-you-know-about-your-users-is-wrong-and-you-won%e2%80%99t-know-until-they-tell-you/#respond" title="Comment on “What you think you know about your users is wrong, and you won’t know until they tell you.&#8221;">Leave a comment</a></span>
							</div><!-- .entry-utility -->
		</div><!-- #post-## -->

		
	


			<div id="post-1055" class="post-1055 post type-post status-publish format-standard hentry category-mobile category-plone category-technology category-zope tag-cms tag-css tag-firefox tag-footer tag-install tag-logo tag-lxml tag-plone tag-theme tag-tutorial tag-web-and-mobile tag-webkit">
			<h2 class="entry-title"><a href="http://blog.mfabrik.com/2011/04/11/tutorial-create-and-theme-mobile-plone-site-with-web-and-mobile/" title="Permalink to Tutorial: create and theme mobile Plone site with Web and Mobile" rel="bookmark">Tutorial: create and theme mobile Plone site with Web and Mobile</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on</span> <a href="http://blog.mfabrik.com/2011/04/11/tutorial-create-and-theme-mobile-plone-site-with-web-and-mobile/" title="10:41 pm" rel="bookmark"><span class="entry-date">April 11, 2011</span></a> <span class="meta-sep">by</span> <span class="author vcard"><a class="url fn n" href="http://blog.mfabrik.com/author/moo/" title="View all posts by Mikko Ohtamaa">Mikko Ohtamaa</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>This is a short tutorial how to mobilize your Plone web site using <a onclick="javascript:urchinTracker ('/outgoing/webandmobile.mfabrik.com');"  href="http://webandmobile.mfabrik.com">Web and Mobile CMS</a> and apply some custom theming on it. <a onclick="javascript:urchinTracker ('/outgoing/plone.org/products/web-and-mobile');"  href="http://plone.org/products/web-and-mobile">Web and Mobile 1.0</a> has now been independently deployed by various organizations in  <a onclick="javascript:urchinTracker ('/outgoing/www.seantis.ch/news/mobile.amtsblatt.ch');"  href="http://www.seantis.ch/news/mobile.amtsblatt.ch">Switzerland</a>, <a onclick="javascript:urchinTracker ('/outgoing/m.zestsoftware.nl/');"  href="http://m.zestsoftware.nl/">Netherlands</a>, <a onclick="javascript:urchinTracker ('/outgoing/m.tsachoice.com/');"  href="http://m.tsachoice.com/">USA</a> and <a onclick="javascript:urchinTracker ('/outgoing/m.veit-schiele.de/');"  href="http://m.veit-schiele.de/">German</a>.</p>
<p>If you get stuck in a point <a onclick="javascript:urchinTracker ('/outgoing/groups.google.com/group/gomobile-dev');"  href="http://groups.google.com/group/gomobile-dev">please ask questions on the gomobile-dev discussion forum</a>.</p>
<h2>Prerequisites</h2>
<ul>
<li>Basic Plone development skills</li>
<li><a onclick="javascript:urchinTracker ('/outgoing/plone.org/products/zopeskel');"  href="http://plone.org/products/zopeskel">Basic ZopeSkel knowledge</a></li>
<li>Basic <a onclick="javascript:urchinTracker ('/outgoing/plone.org/products/dexterity/documentation/manual/five.grok');"  href="http://plone.org/products/dexterity/documentation/manual/five.grok">five.grok knowledge</a> (<a onclick="javascript:urchinTracker ('/outgoing/grok.zope.org/');"  href="http://grok.zope.org/">Grok framework</a> integration for Plone)</li>
</ul>
<p>This tutorial is little rough on details, but links to authoritative sources for more in-depth information. I hope to further polish this tutorial based on the user comments.</p>
<p><em>Note: currently the installation process does not work from China, as the local access to code.google.com and appspot.com servers is limited.<br />
</em></p>
<h2>Installation</h2>
<p><a onclick="javascript:urchinTracker ('/outgoing/webandmobile.mfabrik.com/docs/web-and-mobile/user-manual/installation#plone-4-buildout-cfg-changes');"  href="http://webandmobile.mfabrik.com/docs/web-and-mobile/user-manual/installation#plone-4-buildout-cfg-changes">Install Web and Mobile to your buildout</a>.</p>
<p><a onclick="javascript:urchinTracker ('/outgoing/groups.google.com/group/gomobile-dev/browse_thread/thread/7f5e34e991cfdaa9');"  href="http://groups.google.com/group/gomobile-dev/browse_thread/thread/7f5e34e991cfdaa9">Possibly fight with lxml to get it running</a>.</p>
<p>Create a Plone site (if you don&#8217;t already have an existing site).</p>
<p>Then install following add-ons, in this order in the site control panel</p>
<ul>
<li>Go Mobile</li>
<li>Go Mobile Default Theme</li>
</ul>
<p>Now your website should have a basic mobile experience with a default Web and Mobile theme.</p>
<p><a onclick="javascript:urchinTracker ('/outgoing/blog.mfabrik.com/wp-content/uploads/2011/04/Screen-shot-2010-10-27-at-1.38.42-PM.png');"  href="http://blog.mfabrik.com/wp-content/uploads/2011/04/Screen-shot-2010-10-27-at-1.38.42-PM.png"><img class="alignnone size-medium wp-image-1207" title="Screen shot 2010-10-27 at 1.38.42 PM" src="http://blog.mfabrik.com/wp-content/uploads/2011/04/Screen-shot-2010-10-27-at-1.38.42-PM-287x300.png" alt="" width="287" height="300" /></a></p>
<h2>Test mobile site</h2>
<p><a onclick="javascript:urchinTracker ('/outgoing/webandmobile.mfabrik.com/docs/web-and-mobile/user-manual/installation#modifying-your-local-hosts-file');"  href="http://webandmobile.mfabrik.com/docs/web-and-mobile/user-manual/installation#modifying-your-local-hosts-file">You can visit the mobile version of your site by putting a m.localhost domain in your /etc/hosts file</a>. You don&#8217;t need a mobile browser, as the mobile site is detected by a domain name by default. Your mobile site should be available from http://m.localhost:8080/Plone</p>
<p><a onclick="javascript:urchinTracker ('/outgoing/webandmobile.mfabrik.com/docs/web-and-mobile/user-manual/redirector');"  href="http://webandmobile.mfabrik.com/docs/web-and-mobile/user-manual/redirector">If you access the website with a mobile browser you will be automatically redirected to a mobile site</a>.</p>
<h2>Creating a mobile theme</h2>
<p>Install the ZopeSkel based mobile theme template to your buildout.cfg.</p>
<pre>parts =
   ...
   paster

[paster]
recipe = zc.recipe.egg
eggs =
  PasteScript
  gomobile.templates
  ${instance:eggs}</pre>
<p>Rerun buildout to enable <em>bin/paster</em> command:</p>
<pre>bin/buildout</pre>
<p>Create a theme skeleton using paster. We use a Python package named <em>gomobiletheme.yourcompanyname</em> here as an example name for the theme package. If it asks for &#8220;override files&#8221; answer yes:</p>
<pre>cd src
 ../bin/paster create -t gomobile_theme gomobiletheme.yourcompanyname</pre>
<p>List your new theme egg in buildout in develop-eggs. (Alternatively: use mr.developer  if you indent to put it directly under version control.)</p>
<pre>eggs =
    gomobiletheme.yourcompany
develop =
   src/gomobiletheme.yourcompan</pre>
<p>Rerun buildout.</p>
<h2>Test theme skeleton</h2>
<p>Test the theme installs and works. Restart Plone and install your theme add-on in the add-on installer.</p>
<p>Navigate to m.localhost again and see that the mobile site still opens.</p>
<h2>Theme theory</h2>
<p>The generated mobile theme includes five.grok based <em>viewlets.py</em> and <em>view.py</em> files where you are to place</p>
<ul>
<li>Mobile theme viewlets (note: mobile theme does not use viewlet managers)</li>
<li>Mobile specific view overrides</li>
<li>Mobile specific page template overrides</li>
</ul>
<p>All <a onclick="javascript:urchinTracker ('/outgoing/collective-docs.plone.org/views/layers.html');"  href="http://collective-docs.plone.org/views/layers.html">visual code registered against</a> <em>gomobiletheme.yourcompany.interfaces.IThemeLayer</em> is available and used when your site is browser in mobile mode.</p>
<h2>Changing logo</h2>
<p>Change the generated <em>gomobile.yourcompany.viewlets.Logo</em> class.  In the example below we set it to use logo image file from our web theme.</p>
<pre>class Logo(base.Logo):

 # Change logo URI here
 def getLogoPath(self):
 return "++resource++plonetheme.yourwebtheme.images/logo.png"</pre>
<p>If you are using logo from the web theme resource directory, make sure &lt;resourceDirectory&gt; in theme browser/configure.zcml does not have &lt;resourceDirectory layer=&#8221;"&gt; set. If it&#8217;s set the resource directory is not activate for the mobile theme and the mobile theme cannot access the logo file.</p>
<p>The logo image is resized automatically by <em>gomobiletheme.basic.viewlets.Logo</em> base class for different mobile screen resolutions.</p>
<h2>Changing footer text</h2>
<p>In <em>viewlets.py</em> add:</p>
<pre>class FooterText(base.FooterText):
 """ Free-form HTML text at the end of the page """

 # the presence of this viewlet includes a new page template
 # and overrides default footertext</pre>
<p>Then include the page template itself. Add new file to the your theme package <em>templates/footertext.pt</em>:</p>
<pre>&lt;div id="footer-text" i18n:domain="isleofback.app"&gt;
 Your text goes here.
&lt;/div&gt;</pre>
<h2>Change the default colours and CSS</h2>
<p>Mobile theme static CSS and Javascript resources are provided by five.grok <em>static</em> folder mechanism. <a onclick="javascript:urchinTracker ('/outgoing/webandmobile.mfabrik.com/docs/web-and-mobile/developer-manual/transformations');"  href="http://webandmobile.mfabrik.com/docs/web-and-mobile/developer-manual/transformations">Transformations document provides some in-sight for different CSS files used by different handsets</a>: <em>common.css</em> is served to all mobile phones, <em>highend.css</em> for Webkit and Firefox based browsers, <em>lowend.css</em> for limited browsers.</p>
<p>The default <a onclick="javascript:urchinTracker ('/outgoing/plonegomobile.googlecode.com/svn/gomobiletheme.basic/trunk/gomobiletheme/basic/static/');"  href="http://plonegomobile.googlecode.com/svn/gomobiletheme.basic/trunk/gomobiletheme/basic/static/">gomobiletheme.basic</a> CSS resources are included by default with the theme skeleton. You need override only the CSS rules you specifically want to change for your own  theme. <a onclick="javascript:urchinTracker ('/outgoing/code.google.com/p/plonegomobile/source/browse/#svn%2Fgomobile.templates%2Ftrunk%2Fgomobile%2Ftemplates%2Ftemplates%2Fgomobile_theme%2F%2Bnamespace_package%2B%2F%2Bpackage%2B%2Fstatic');"  href="http://code.google.com/p/plonegomobile/source/browse/#svn%2Fgomobile.templates%2Ftrunk%2Fgomobile%2Ftemplates%2Ftemplates%2Fgomobile_theme%2F%2Bnamespace_package%2B%2F%2Bpackage%2B%2Fstatic">This can be done by adding rules to common.css, lowend.css and highend.css files which you can find from the generated theme package.</a></p>
<h2>Further info</h2>
<ul>
<li><a onclick="javascript:urchinTracker ('/outgoing/webandmobile.mfabrik.com/docs/web-and-mobile/developer-manual/theming');"  href="http://webandmobile.mfabrik.com/docs/web-and-mobile/developer-manual/theming">Read theming manual in Web and Mobile documentation section</a>.</li>
<li><a onclick="javascript:urchinTracker ('/outgoing/www.slideshare.net/miohtama/mad-about-mobile');"  href="http://www.slideshare.net/miohtama/mad-about-mobile">See Web and Mobile presentation in Plone Conference 2010</a></li>
<li><a onclick="javascript:urchinTracker ('/outgoing/code.google.com/p/plonegomobile/source/browse/#svn%2Fplonecommunity.app%2Ftrunk%2Fplonecommunity%2Fapp');"  href="http://code.google.com/p/plonegomobile/source/browse/#svn%2Fplonecommunity.app%2Ftrunk%2Fplonecommunity%2Fapp">See plonecommunity.app package for an open source example</a></li>
<li><a onclick="javascript:urchinTracker ('/outgoing/code.google.com/p/plonegomobile/source/browse/gomobile.docs/trunk/gomobile/docs/manual/developer-manual/theming.txt');"  href="http://code.google.com/p/plonegomobile/source/browse/gomobile.docs/trunk/gomobile/docs/manual/developer-manual/theming.txt">SVN trunk version of the theming manual for the latest instructions</a></li>
<li><a onclick="javascript:urchinTracker ('/outgoing/groups.google.com/group/gomobile-dev');"  href="http://groups.google.com/group/gomobile-dev">Subscribe to Web and Mobile discussion group for further questions</a></li>
</ul>
<p>&nbsp;
<p class="signature">
<a onclick="javascript:urchinTracker ('/outgoing/mfabrik.com/@@zoho-contact-form');"  href="http://mfabrik.com/@@zoho-contact-form"><img valign="middle"  src="http://blog.mfabrik.com/wp-content/uploads/mfabrik-24.png"></img></a> <a onclick="javascript:urchinTracker ('/outgoing/mfabrik.com/@@zoho-contact-form');"  href="http://mfabrik.com/@@zoho-contact-form"">Get developers</a> <a onclick="javascript:urchinTracker ('/outgoing/twitter.com/mfabrik');"  href="http://twitter.com/mfabrik"> <a onclick="javascript:urchinTracker ('/outgoing/twitter.com/mfabrik');"  href="http://feeds.feedburner.com/mFabrikWebAndMobileDevelopment" rel="alternate" type="application/rss+xml"><img valign="middle" src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a> <a onclick="javascript:urchinTracker ('/outgoing/feeds.feedburner.com/mFabrikWebAndMobileDevelopment');"  href="http://feeds.feedburner.com/mFabrikWebAndMobileDevelopment" rel="alternate" type="application/rss+xml">Subscribe mFabrik blog in a reader</a> <img valign="middle"  src="http://blog.mfabrik.com/wp-content/uploads/twitter-24.png"></img></a> <a onclick="javascript:urchinTracker ('/outgoing/twitter.com/moo9000');"  href="http://twitter.com/moo9000">Follow me on Twitter</a></p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
									<span class="cat-links">
						<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span> <a href="http://blog.mfabrik.com/category/mobile/" title="View all posts in mobile" rel="category tag">mobile</a>, <a href="http://blog.mfabrik.com/category/plone/" title="View all posts in plone" rel="category tag">plone</a>, <a href="http://blog.mfabrik.com/category/technology/" title="View all posts in technology" rel="category tag">technology</a>, <a href="http://blog.mfabrik.com/category/zope/" title="View all posts in zope" rel="category tag">zope</a>					</span>
					<span class="meta-sep">|</span>
													<span class="tag-links">
						<span class="entry-utility-prep entry-utility-prep-tag-links">Tagged</span> <a href="http://blog.mfabrik.com/tag/cms/" rel="tag">cms</a>, <a href="http://blog.mfabrik.com/tag/css/" rel="tag">css</a>, <a href="http://blog.mfabrik.com/tag/firefox/" rel="tag">firefox</a>, <a href="http://blog.mfabrik.com/tag/footer/" rel="tag">footer</a>, <a href="http://blog.mfabrik.com/tag/install/" rel="tag">install</a>, <a href="http://blog.mfabrik.com/tag/logo/" rel="tag">logo</a>, <a href="http://blog.mfabrik.com/tag/lxml/" rel="tag">lxml</a>, <a href="http://blog.mfabrik.com/tag/plone/" rel="tag">plone</a>, <a href="http://blog.mfabrik.com/tag/theme/" rel="tag">theme</a>, <a href="http://blog.mfabrik.com/tag/tutorial/" rel="tag">tutorial</a>, <a href="http://blog.mfabrik.com/tag/web-and-mobile/" rel="tag">web and mobile</a>, <a href="http://blog.mfabrik.com/tag/webkit/" rel="tag">webkit</a>					</span>
					<span class="meta-sep">|</span>
								<span class="comments-link"><a href="http://blog.mfabrik.com/2011/04/11/tutorial-create-and-theme-mobile-plone-site-with-web-and-mobile/#respond" title="Comment on Tutorial: create and theme mobile Plone site with Web and Mobile">Leave a comment</a></span>
							</div><!-- .entry-utility -->
		</div><!-- #post-## -->

		
	

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://blog.mfabrik.com/page/3/?mobilize-test-wordpress=true" ><span class="meta-nav">&larr;</span> Older posts</a></div>
					<div class="nav-next"><a href="http://blog.mfabrik.com/?mobilize-test-wordpress=true" >Newer posts <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->
			</div><!-- #content -->
		</div><!-- #container -->


		<div id="primary" class="widget-area" role="complementary">
			<ul class="xoxo">


			<li id="search" class="widget-container widget_search">
				<form role="search" method="get" id="searchform" action="http://blog.mfabrik.com/" >
	<div><label class="screen-reader-text" for="s">Search for:</label>
	<input type="text" value="" name="s" id="s" />
	<input type="submit" id="searchsubmit" value="Search" />
	</div>
	</form>			</li>

			<li id="archives" class="widget-container">
				<h3 class="widget-title">Archives</h3>
				<ul>
						<li><a href='http://blog.mfabrik.com/2011/04/' title='April 2011'>April 2011</a></li>
	<li><a href='http://blog.mfabrik.com/2011/03/' title='March 2011'>March 2011</a></li>
	<li><a href='http://blog.mfabrik.com/2011/02/' title='February 2011'>February 2011</a></li>
	<li><a href='http://blog.mfabrik.com/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://blog.mfabrik.com/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://blog.mfabrik.com/2010/11/' title='November 2010'>November 2010</a></li>
	<li><a href='http://blog.mfabrik.com/2010/10/' title='October 2010'>October 2010</a></li>
	<li><a href='http://blog.mfabrik.com/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://blog.mfabrik.com/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://blog.mfabrik.com/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://blog.mfabrik.com/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://blog.mfabrik.com/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://blog.mfabrik.com/2010/04/' title='April 2010'>April 2010</a></li>
	<li><a href='http://blog.mfabrik.com/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://blog.mfabrik.com/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://blog.mfabrik.com/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://blog.mfabrik.com/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://blog.mfabrik.com/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://blog.mfabrik.com/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://blog.mfabrik.com/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://blog.mfabrik.com/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://blog.mfabrik.com/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://blog.mfabrik.com/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://blog.mfabrik.com/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://blog.mfabrik.com/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://blog.mfabrik.com/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://blog.mfabrik.com/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://blog.mfabrik.com/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://blog.mfabrik.com/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://blog.mfabrik.com/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://blog.mfabrik.com/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://blog.mfabrik.com/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://blog.mfabrik.com/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://blog.mfabrik.com/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://blog.mfabrik.com/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://blog.mfabrik.com/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://blog.mfabrik.com/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://blog.mfabrik.com/2007/07/' title='July 2007'>July 2007</a></li>
				</ul>
			</li>

			<li id="meta" class="widget-container">
				<h3 class="widget-title">Meta</h3>
				<ul>
										<li><a href="http://blog.mfabrik.com/wp-login.php">Log in</a></li>
									</ul>
			</li>

					</ul>
		</div><!-- #primary .widget-area -->

	</div><!-- #main -->

	<div id="footer" role="contentinfo">
		<div id="colophon">



			<div id="site-info">
				<a href="http://blog.mfabrik.com/" title="mFabrik &#8211; mobile sites, apps, HTML5 and CMS software development" rel="home">
					mFabrik &#8211; mobile sites, apps, HTML5 and CMS software development				</a>
			</div><!-- #site-info -->

			<div id="site-generator">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">Proudly powered by WordPress.</a>
			</div><!-- #site-generator -->

		</div><!-- #colophon -->
	</div><!-- #footer -->

</div><!-- #wrapper -->

<script type='text/javascript' src='http://blog.mfabrik.com/wp-includes/js/admin-bar.js?ver=20110131'></script>

<!-- tracker added by Ultimate Google Analytics plugin v1.5.3: http://www.oratransplant.nl/uga -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-8819100-2";
urchinTracker();
</script>


<!-- SyntaxHighlighter Start -->
	<script type="text/javascript" src="http://blog.mfabrik.com/wp-content/plugins/syntax/Scripts/shCore.js"></script>
	<script type="text/javascript" src="http://blog.mfabrik.com/wp-content/plugins/syntax/Scripts/shBrushPython.js"></script>
	<script type="text/javascript">dp.SyntaxHighlighter.HighlightAll('code');</script>
<!-- SyntaxHighlighter End -->
<!--  phpinfo() Plugin for WordPress by Christopher Ross  - http://thisismyurl.com  -->		<div id="wpadminbar">
			<div class="quicklinks">
				<ul>
									</ul>
			</div>

			<div id="adminbarsearch-wrap">
				<form action="http://blog.mfabrik.com" method="get" id="adminbarsearch">
					<input class="adminbar-input" name="s" id="adminbar-search" type="text" value="" maxlength="150" />
					<input type="submit" class="adminbar-button" value="Search"/>
				</form>
			</div>
		</div>

		</body>
</html>
